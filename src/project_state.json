{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 69,
  "summary": "Expand scope to include a 1:1 BTC reserve backing model where reserve BTC can be acquired via third-party providers (BitPay, MoonPay, MetaMask), and the app offers a “flash bitcoin” option to send/withdraw transferable BTC to external mainnet wallets; credit value tracks BTC market price in USD terms.",
  "architectural_notes": [
    "Send transactions should be executed as direct on-chain BTC transfers to the receiver address, with blockchain network fees paid by deducting from the sender’s credits (fees taken out of credits).",
    "Admins receive and can access an initial 500-credit balance and can distribute credits via an admin page that auto-populates immediately after signing in with their Internet Identity principal.",
    "Post–Internet Identity login flow: determine admin status for the authenticated principal, then auto-redirect admin users to the Admin page (/admin).",
    "Admin auto-redirect/admin flow should only occur after the initial Internet Identity sign-in completes; then verify the authenticated principal’s admin status before applying any admin-specific navigation.",
    "Support per-user app-managed (custodial) wallet behavior tied to the user profile (\"anonymous wallet\") for initiating on-chain mainnet broadcasts via blockchain APIs, funded/limited by the user’s credit balance.",
    "Use BlockCypher API for Bitcoin mainnet transaction broadcast (and any required supporting calls such as balance/UTXO lookups).",
    "Implement secure key management for a custodial wallet (generate/store keys, signing happens server-side; protect private keys via encryption/HSM/secret manager).",
    "Expose a Telegram bot command interface (e.g., /send <address> <amount>) that calls into the agent’s transaction functions.",
    "Add pre-send validation: recipient address format validation and sufficient balance checks before signing/broadcasting.",
    "Credits are intended to be 1:1 backed by mainnet BTC held in reserve; define and track reserve BTC balances vs. outstanding issued credits (auditability/coverage)."
  ],
  "known_issues": [
    "Admin principal/creator verification (admin-status detection) is slow after sign-in, causing a long delay before the admin flow completes; needs performance/latency improvement (e.g., caching, faster query, or better loading UX).",
    "User reports a Send BTC / credit-to-wallet transfer did not post on the Bitcoin blockchain; on-chain broadcast/processing may be failing or not being triggered, needs investigation and fix.",
    "Send BTC / transfer-to-mainnet is not being broadcast or posted on-chain; receiver wallets are not receiving BTC (needs troubleshooting of broadcast/outcall + Bitcoin API integration).",
    "User reports reserve/flash-withdrawal sends are failing and not showing on Bitcoin mainnet; needs troubleshooting of broadcast/outcall + blockchain API integration for this flow."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-add-internet-identity-authentication-so-each-user-has-an-account-and-a-persistent-credit-balance",
      "title": "Add Internet Identity authentication so each user has an account and a persistent credit balance.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-website-flow-to-purchase-top-up-credits-that-does-not-rely-on-unspecified-third-party-payment-providers-users-submit-a-bitcoin-mainnet-deposit-transaction-id-txid-and-the-app-verifies-it-via-a-blockchain-api-before-credits-are-issued",
      "title": "Create a website flow to purchase/top-up credits that does not rely on unspecified third-party payment providers: users submit a Bitcoin mainnet deposit transaction ID (txid) and the app verifies it via a blockchain API before credits are issued.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-send-btc-feature-implemented-as-a-transfer-request-system-users-enter-a-bitcoin-mainnet-destination-address-and-amount-in-credits-btc-credits-are-reserved-deducted-and-the-request-is-recorded-with-a-status-that-can-be-updated-after-on-chain-verification",
      "title": "Add a “Send BTC” feature implemented as a transfer-request system: users enter a Bitcoin mainnet destination address and amount in credits (BTC), credits are reserved/deducted, and the request is recorded with a status that can be updated after on-chain verification.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-blockchain-api-verification-for-transfer-requests-allow-attaching-an-on-chain-transaction-id-to-a-transfer-request-and-verify-that-the-transaction-matches-the-requested-destination-and-amount-before-marking-it-verified",
      "title": "Integrate blockchain API verification for transfer requests: allow attaching an on-chain transaction ID to a transfer request and verify that the transaction matches the requested destination and amount before marking it VERIFIED.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-coherent-ui-ux-with-a-distinct-visual-theme-not-blue-purple-applied-consistently-across-pages-sign-in-dashboard-buy-credits-send-btc-history",
      "title": "Build a coherent UI/UX with a distinct visual theme (not blue/purple) applied consistently across pages (sign-in, dashboard, buy credits, send BTC, history).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-custom-static-images-for-the-ui-and-render-them-from-frontend-static-assets",
      "title": "Generate and include custom static images for the UI and render them from frontend static assets.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-admin-role-that-is-recognized-via-internet-identity-no-separate-username-password-auth-and-is-restricted-by-a-backend-allowlist-of-admin-principals-expose-a-backend-query-method-that-the-frontend-can-use-to-determine-whether-the-signed-in-caller-is-an-admin",
      "title": "Implement an admin role that is recognized via Internet Identity (no separate username/password auth) and is restricted by a backend allowlist of admin principals; expose a backend query method that the frontend can use to determine whether the signed-in caller is an admin.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-ui-flow-to-give-credits-to-a-specified-user-by-principal-text-from-the-admin-s-own-500-credit-balance-enforcing-that-the-admin-cannot-give-more-credits-than-they-currently-have-record-both-the-admin-debit-and-recipient-credit-in-the-ledger-transaction-history",
      "title": "Add an admin-only UI flow to give credits to a specified user (by Principal text) from the admin’s own 500-credit balance, enforcing that the admin cannot give more credits than they currently have; record both the admin debit and recipient credit in the ledger/transaction history.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-admin-credentials-page-step-that-is-shown-immediately-after-a-user-signs-in-with-internet-identity-when-the-signed-in-caller-is-an-admin",
      "title": "Add an admin-only “Admin Credentials” page/step that is shown immediately after a user signs in with Internet Identity when the signed-in caller is an admin.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-protect-the-admin-credential-page-with-the-same-admin-gating-behavior-as-the-existing-admin-route-so-non-admin-users-cannot-view-it-redirect-them-to",
      "title": "Protect the admin credential page with the same admin gating behavior as the existing /admin route so non-admin users cannot view it (redirect them to '/').",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-existing-admin-link-and-admin-admin-panel-continue-to-work-and-provide-an-obvious-way-for-an-admin-to-continue-from-the-admin-credentials-page-to-the-admin-panel",
      "title": "Ensure the existing Admin link and /admin Admin Panel continue to work, and provide an obvious way for an admin to continue from the Admin Credentials page to the Admin Panel.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-post-internet-identity-sign-in-routing-so-that-when-the-signed-in-caller-is-an-admin-the-app-always-automatically-navigates-to-admin-credentials-immediately-after-admin-status-has-been-determined-even-if-the-caller-has-not-created-a-user-profile-yet",
      "title": "Fix the post–Internet Identity sign-in routing so that when the signed-in caller is an admin, the app always automatically navigates to `/admin-credentials` immediately after admin status has been determined, even if the caller has not created a user profile yet.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-profile-setup-modal-does-not-block-or-override-the-admin-auto-redirect-flow-admins-should-not-be-forced-to-complete-profile-setup-before-seeing-admin-credentials",
      "title": "Ensure the profile setup modal does not block or override the admin auto-redirect flow; admins should not be forced to complete profile setup before seeing `/admin-credentials`.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-auto-redirect-logic-robust-across-repeated-login-logout-cycles-and-page-refreshes-by-resetting-any-one-time-redirect-guard-when-the-authenticated-principal-changes-not-only-when-identity-becomes-undefined",
      "title": "Make the admin auto-redirect logic robust across repeated login/logout cycles and page refreshes by resetting any one-time redirect guard when the authenticated principal changes (not only when identity becomes undefined).",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-admin-detection-caching-so-that-admin-status-is-evaluated-per-authenticated-principal-not-reused-from-a-previous-anonymous-non-admin-session-ensuring-the-app-can-correctly-recognize-an-admin-immediately-after-login",
      "title": "Fix admin detection caching so that admin status is evaluated per authenticated principal (not reused from a previous anonymous/non-admin session), ensuring the app can correctly recognize an admin immediately after login.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-the-post-internet-identity-login-routing-so-that-when-the-signed-in-caller-is-an-admin-the-app-always-navigates-to-admin-credentials-as-soon-as-admin-status-has-been-fetched-for-the-current-principal-and-does-not-get-overridden-by-any-intermediate-redirects",
      "title": "Refine the post–Internet Identity login routing so that when the signed-in caller is an admin, the app always navigates to `/admin-credentials` as soon as admin status has been fetched for the current principal, and does not get overridden by any intermediate redirects.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-user-facing-loading-state-during-the-brief-period-after-login-while-admin-status-is-being-determined-so-admins-do-not-land-on-the-dashboard-first-even-briefly-before-the-admin-redirect-happens",
      "title": "Add a clear, user-facing loading state during the brief period after login while admin status is being determined, so admins do not land on the dashboard first (even briefly) before the admin redirect happens.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-post-sign-in-admin-verification-ux-so-that-when-admin-status-is-taking-a-long-time-to-resolve-the-loading-screen-clearly-communicates-what-is-happening-and-gives-the-user-safe-recovery-actions-without-bypassing-admin-gating",
      "title": "Improve the post–sign-in admin verification UX so that when admin status is taking a long time to resolve, the loading screen clearly communicates what is happening and gives the user safe recovery actions (without bypassing admin gating).",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-reduce-repeated-admin-check-time-for-the-same-authenticated-principal-by-adding-a-frontend-cache-for-the-admin-status-query-keyed-by-principal-and-ensure-the-cache-is-correctly-invalidated-when-the-authenticated-principal-changes-or-the-user-signs-out",
      "title": "Reduce repeated admin-check time for the same authenticated principal by adding a frontend cache for the admin-status query keyed by Principal, and ensure the cache is correctly invalidated when the authenticated principal changes or the user signs out.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-lightweight-diagnostics-to-the-frontend-to-measure-and-surface-admin-verification-latency-in-development-or-via-console-so-it-is-easier-to-confirm-improvements-and-identify-where-time-is-spent-actor-initialization-vs-iscalleradmin-query",
      "title": "Add lightweight diagnostics to the frontend to measure and surface admin-verification latency in development (or via console) so it is easier to confirm improvements and identify where time is spent (actor initialization vs. isCallerAdmin query).",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-copy-across-the-app-to-clearly-and-consistently-state-that-1-purchased-credit-equals-1-btc-sent-on-the-bitcoin-mainnet-to-any-mainnet-wallet-and-that-purchases-transfers-are-verified-via-a-blockchain-api",
      "title": "Update user-facing copy across the app to clearly and consistently state that 1 purchased credit equals 1 BTC sent on the Bitcoin mainnet to any mainnet wallet, and that purchases/transfers are verified via a blockchain API.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-standardize-balance-amount-labeling-throughout-the-ui-so-users-can-immediately-understand-that-displayed-amounts-are-credits-denominated-as-btc-e-g-use-consistent-labels-like-credits-btc-or-equivalent-wording-without-changing-the-underlying-accounting",
      "title": "Standardize balance/amount labeling throughout the UI so users can immediately understand that displayed amounts are credits denominated as BTC (e.g., use consistent labels like “Credits (BTC)” or equivalent wording) without changing the underlying accounting.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-send-btc-page-ui-to-clearly-show-before-submission-the-requested-receiver-amount-the-estimated-network-fee-and-the-total-credits-that-will-be-deducted-enforce-form-validation-against-total-cost-amount-fee-rather-than-amount-alone",
      "title": "Update the Send BTC page UI to clearly show (before submission) the requested receiver amount, the estimated network fee, and the total credits that will be deducted; enforce form validation against total cost (amount + fee) rather than amount alone.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-update-transaction-history-presentation-to-correctly-reflect-fee-inclusive-debits-for-transfers-so-users-can-see-that-the-fee-was-paid-from-credits-without-breaking-existing-history-verification-flows",
      "title": "Update transaction/history presentation to correctly reflect fee-inclusive debits for transfers so users can see that the fee was paid from credits, without breaking existing history/verification flows.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-ui-so-it-reflects-the-automatic-initial-500-credit-grant-behavior-no-confusing-or-misleading-prompts-to-manually-assign-initial-credits",
      "title": "Update the admin UI so it reflects the automatic initial 500-credit grant behavior (no confusing or misleading prompts to manually assign initial credits).",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-post-internet-identity-sign-in-routing-so-that-when-the-signed-in-caller-is-verified-as-an-admin-principal-the-app-automatically-navigates-the-user-directly-to-the-admin-page-admin-instead-of-admin-credentials-immediately-after-admin-status-has-been-determined",
      "title": "Update the post–Internet Identity sign-in routing so that when the signed-in caller is verified as an admin principal, the app automatically navigates the user directly to the Admin page (`/admin`) (instead of `/admin-credentials`) immediately after admin status has been determined.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-post-internet-identity-login-flow-so-the-app-does-not-treat-the-user-as-an-admin-including-auto-redirecting-to-an-admin-route-until-after-the-user-has-completed-the-initial-sign-in-and-the-signed-in-principal-has-been-verified-via-an-admin-permission-check-for-that-principal",
      "title": "Update the post–Internet Identity login flow so the app does not treat the user as an admin (including auto-redirecting to an admin route) until AFTER the user has completed the initial sign-in and the signed-in principal has been verified via an admin-permission check for that principal.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-change-the-admin-verification-ux-so-that-admin-checking-happens-in-the-background-during-the-initial-signed-in-experience-instead-of-blocking-the-entire-app-with-the-full-screen-admin-verification-loading-screen",
      "title": "Change the admin-verification UX so that admin checking happens in the background during the initial signed-in experience, instead of blocking the entire app with the full-screen admin verification loading screen.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-verification-step-for-a-newly-authenticated-principal-is-a-real-verification-for-that-principal-not-solely-a-reused-cached-result-by-forcing-a-fresh-admin-check-at-least-once-per-login-session-for-the-current-principal-before-allowing-admin-auto-navigation",
      "title": "Ensure the admin verification step for a newly authenticated principal is a real verification for that principal (not solely a reused cached result) by forcing a fresh admin check at least once per login session for the current principal before allowing admin auto-navigation.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-send-btc-to-mainnet-wallet-section-to-the-existing-admin-page-admin-so-verified-admins-can-create-btc-transfer-requests-directly-from-their-admin-credit-balance-the-same-transfer-request-behavior-as-the-existing-send-btc-page",
      "title": "Add an admin-only \"Send BTC to Mainnet Wallet\" section to the existing Admin page (/admin) so verified admins can create BTC transfer requests directly from their admin credit balance (the same transfer-request behavior as the existing Send BTC page).",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-in-the-new-admin-page-send-btc-to-mainnet-wallet-section-show-the-estimated-network-fee-and-total-credits-that-will-be-deducted-and-block-submission-when-the-admin-balance-is-insufficient-for-amount-estimated-fee-or-when-the-fee-estimate-is-unavailable",
      "title": "In the new Admin page \"Send BTC to Mainnet Wallet\" section, show the estimated network fee and total credits that will be deducted, and block submission when the admin balance is insufficient for (amount + estimated fee) or when the fee estimate is unavailable.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-copy-across-all-btc-to-mainnet-transfer-entry-points-to-explicitly-state-that-transfers-are-posted-on-the-bitcoin-blockchain-and-that-bitcoin-network-fees-are-deducted-from-the-user-s-credits",
      "title": "Update user-facing copy across all BTC-to-mainnet transfer entry points to explicitly state that transfers are posted on the Bitcoin blockchain and that Bitcoin network fees are deducted from the user’s credits.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-transfer-related-labels-for-debit-transactions-consistently-describe-them-as-on-chain-bitcoin-mainnet-transfers-not-only-transfer-requests-while-preserving-the-existing-verification-workflow-attach-txid-and-verify-against-destination-amount",
      "title": "Ensure transfer-related labels for debit transactions consistently describe them as on-chain Bitcoin mainnet transfers (not only “transfer requests”) while preserving the existing verification workflow (attach txid and verify against destination/amount).",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-post-internet-identity-login-flow-so-that-an-allowlisted-admin-principal-reliably-gains-access-to-the-admin-panel-after-login-including-correct-admin-detection-and-auto-navigation-to-admin-once-admin-status-is-confirmed-for-the-currently-authenticated-principal",
      "title": "Fix the post–Internet Identity login flow so that an allowlisted admin principal reliably gains access to the Admin panel after login, including correct admin detection and auto-navigation to `/admin` once admin status is confirmed for the currently authenticated principal.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-admin-verification-uses-the-same-backend-access-control-initialization-path-as-the-rest-of-the-app-by-reliably-applying-any-caffeineadmintoken-url-parameter-during-actor-initialization-across-the-internet-identity-login-redirect-so-admin-checks-are-not-performed-with-an-uninitialized-incorrect-access-control-state",
      "title": "Ensure admin verification uses the same backend access-control initialization path as the rest of the app by reliably applying any `caffeineAdminToken` URL parameter during actor initialization across the Internet Identity login redirect (so admin checks are not performed with an uninitialized/incorrect access-control state).",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-non-blocking-troubleshooting-experience-when-a-signed-in-user-expects-admin-access-but-is-not-detected-as-an-admin-show-the-full-principal-id-copyable-and-a-plain-english-message-explaining-that-admin-access-is-granted-only-to-specific-principals-plus-a-safe-action-to-re-run-the-admin-check",
      "title": "Add a clear, non-blocking troubleshooting experience when a signed-in user expects admin access but is not detected as an admin: show the full principal ID (copyable) and a plain-English message explaining that admin access is granted only to specific principals, plus a safe action to re-run the admin check.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-end-to-end-login-flow-works-for-the-allowlisted-principal-after-signing-in-with-internet-identity-as-ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe-the-frontend-recognizes-admin-status-and-the-user-can-reach-the-admin-panel-at-route-admin-without-being-blocked-by-admin-gating",
      "title": "Ensure the end-to-end login flow works for the allowlisted principal: after signing in with Internet Identity as `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe`, the frontend recognizes admin status and the user can reach the Admin panel at route `/admin` without being blocked by admin gating.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-gating-ux-so-that-when-a-signed-in-user-attempts-to-open-admin-but-is-not-detected-as-an-admin-the-app-shows-an-on-page-troubleshooting-experience-including-the-full-principal-id-with-a-copy-action-and-a-safe-re-run-admin-check-action-instead-of-immediately-redirecting-away-before-the-user-can-see-why-access-was-denied",
      "title": "Fix the admin gating UX so that when a signed-in user attempts to open `/admin` but is not detected as an admin, the app shows an on-page troubleshooting experience (including the full principal ID with a copy action and a safe “Re-run admin check” action) instead of immediately redirecting away before the user can see why access was denied.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-add-lightweight-development-diagnostics-to-help-confirm-why-the-admin-panel-does-not-open-including-logging-in-development-the-currently-authenticated-principal-whether-the-actor-finished-initializeaccesscontrolwithsecret-and-the-final-iscalleradmin-result-used-by-admin-gating",
      "title": "Add lightweight development diagnostics to help confirm why the admin panel does not open, including logging (in development) the currently authenticated principal, whether the actor finished `_initializeAccessControlWithSecret(...)`, and the final `isCallerAdmin()` result used by `/admin` gating.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-frontend-actor-initialization-so-the-backend-access-control-initialization-secret-caffeineadmintoken-is-reliably-applied-across-the-internet-identity-login-redirect-read-the-token-from-a-url-query-string-and-b-url-hash-if-present-persist-it-to-sessionstorage-and-reuse-it-on-subsequent-page-loads-during-the-same-session",
      "title": "Fix frontend actor initialization so the backend access-control initialization secret `caffeineAdminToken` is reliably applied across the Internet Identity login redirect: read the token from (a) URL query string and (b) URL hash (if present), persist it to `sessionStorage`, and reuse it on subsequent page loads during the same session.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-access-control-initialization-from-being-inadvertently-reset-by-an-empty-caffeineadmintoken-only-call-initializeaccesscontrolwithsecret-when-a-non-empty-token-value-is-available-and-add-development-only-console-diagnostics-showing-1-the-authenticated-principal-2-whether-a-token-was-present-and-3-whether-initializeaccesscontrolwithsecret-was-executed",
      "title": "Prevent access-control initialization from being inadvertently reset by an empty `caffeineAdminToken`: only call `_initializeAccessControlWithSecret(...)` when a non-empty token value is available, and add development-only console diagnostics showing (1) the authenticated principal, (2) whether a token was present, and (3) whether `_initializeAccessControlWithSecret(...)` was executed.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-admin-access-denied-troubleshooting-ui-to-show-actionable-user-facing-diagnostics-in-english-that-help-determine-why-admin-is-blocked-display-the-authenticated-principal-already-shown-and-additionally-show-whether-an-admin-token-was-detected-applied-for-this-session-plus-a-button-to-re-run-the-admin-check-without-navigating-away-from-the-page",
      "title": "Improve the admin access denied troubleshooting UI to show actionable, user-facing diagnostics (in English) that help determine why `/admin` is blocked: display the authenticated principal (already shown) and additionally show whether an admin token was detected/applied for this session, plus a button to re-run the admin check without navigating away from the page.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-send-btc-and-admin-send-btc-to-mainnet-wallet-flows-to-reflect-on-chain-posting-outcomes-after-submitting-a-send-show-the-created-request-id-and-display-the-on-chain-txid-status-when-available-if-broadcast-is-disabled-or-fails-show-an-english-error-explaining-why-the-transfer-was-not-posted",
      "title": "Update the frontend Send BTC and Admin “Send BTC to Mainnet Wallet” flows to reflect on-chain posting outcomes: after submitting a send, show the created request ID and display the on-chain txid/status when available; if broadcast is disabled or fails, show an English error explaining why the transfer was not posted.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-transfer-details-ui-e-g-the-existing-verify-details-dialog-fed-by-gettransferrequest-to-include-an-explicit-on-chain-transaction-id-txid-field-when-blockchaintxid-is-present-and-show-status-text-that-differentiates-in-progress-completed-and-failed-in-english",
      "title": "Extend transfer details UI (e.g., the existing verify/details dialog fed by `getTransferRequest`) to include an explicit “On-chain Transaction ID (txid)” field when `blockchainTxId` is present, and show status text that differentiates `IN_PROGRESS`, `COMPLETED`, and `FAILED` in English.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-error-handling-for-send-btc-both-send-and-admin-admin-send-btc-to-mainnet-wallet-so-that-when-broadcast-fails-or-is-unavailable-the-ui-clearly-states-in-english-that-the-transaction-was-not-posted-to-the-bitcoin-blockchain-and-that-the-user-s-credits-were-restored-and-provides-a-way-to-view-the-created-request-s-details-status-when-a-request-id-exists",
      "title": "Update user-facing error handling for Send BTC (both `/send` and Admin `/admin` “Send BTC to Mainnet Wallet”) so that when broadcast fails or is unavailable, the UI clearly states in English that the transaction was not posted to the Bitcoin blockchain and that the user’s credits were restored, and provides a way to view the created request’s details/status when a request ID exists.",
      "reqIds": [
        "REQ-63"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-send-btc-user-experience-so-it-no-longer-shows-a-blanket-message-that-the-broadcast-service-is-unavailable-when-on-chain-broadcast-is-enabled-and-ensure-any-user-facing-error-messages-are-clear-english-statements-about-on-chain-posting-outcomes",
      "title": "Update the frontend Send BTC user experience so it no longer shows a blanket message that the broadcast service is unavailable when on-chain broadcast is enabled, and ensure any user-facing error messages are clear English statements about on-chain posting outcomes.",
      "reqIds": [
        "REQ-67"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-to-display-the-authenticated-user-s-anonymous-wallet-identity-in-the-signed-in-experience-with-a-copy-to-clipboard-action-and-clear-english-explanatory-text",
      "title": "Update the frontend to display the authenticated user’s anonymous wallet identity in the signed-in experience, with a copy-to-clipboard action and clear English explanatory text.",
      "reqIds": [
        "REQ-70"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-send-btc-flow-continues-to-use-credits-to-create-and-broadcast-bitcoin-mainnet-transfers-and-update-user-facing-copy-so-it-explicitly-describes-sending-from-your-app-wallet-balance-credits-to-an-external-mainnet-address",
      "title": "Ensure the Send BTC flow continues to use credits to create and broadcast Bitcoin mainnet transfers, and update user-facing copy so it explicitly describes sending “from your app wallet balance (credits)” to an external mainnet address.",
      "reqIds": [
        "REQ-71"
      ],
      "version": 1
    },
    {
      "id": "feature-add-minimal-frontend-query-support-react-query-hook-to-fetch-the-caller-wallet-identity-from-the-backend-and-reuse-it-across-screens-without-refetch-loops",
      "title": "Add minimal frontend query support (React Query hook) to fetch the caller wallet identity from the backend and reuse it across screens without refetch loops.",
      "reqIds": [
        "REQ-72"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-transfer-details-experience-so-a-signed-in-user-can-confirm-transaction-completion-for-a-send-btc-transfer-request-and-see-the-latest-on-chain-status-including-txid-when-available",
      "title": "Update the frontend transfer details experience so a signed-in user can confirm transaction completion for a Send BTC transfer request and see the latest on-chain status (including txid when available).",
      "reqIds": [
        "REQ-76"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-send-btc-and-admin-send-btc-flows-to-display-the-actual-broadcast-outcome-based-on-the-persisted-transfer-request-status-txid-failure-reason-and-provide-an-obvious-path-to-view-the-request-details-after-submission",
      "title": "Update the frontend Send BTC and Admin Send BTC flows to display the actual broadcast outcome based on the persisted transfer request (status/txid/failure reason), and provide an obvious path to view the request details after submission.",
      "reqIds": [
        "REQ-81"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-hooks-usequeries-ts-usesendbtc-error-success-handling-to-match-the-new-backend-behavior-where-a-request-id-can-be-returned-even-when-broadcast-fails-avoiding-misleading-no-request-created-messaging",
      "title": "Update `frontend/src/hooks/useQueries.ts` (`useSendBTC`) error/success handling to match the new backend behavior where a request ID can be returned even when broadcast fails, avoiding misleading 'no request created' messaging.",
      "reqIds": [
        "REQ-82"
      ],
      "version": 1
    },
    {
      "id": "feature-add-lightweight-diagnostics-development-only-to-help-confirm-why-on-chain-posting-is-failing-including-surfacing-broadcast-attempt-results-and-reasons-without-exposing-secrets",
      "title": "Add lightweight diagnostics (development-only) to help confirm why on-chain posting is failing, including surfacing broadcast attempt results and reasons without exposing secrets.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-send-btc-experience-to-surface-the-new-backend-safety-check-and-broadcast-outcomes-in-clear-english-invalid-address-insufficient-on-chain-funds-broadcast-failed-with-reason-broadcast-succeeded-with-txid-reusing-the-existing-flow-that-fetches-the-created-transfer-request-after-sendbtc-so-the-ui-reflects-the-persisted-request-status-txid-failurereason",
      "title": "Update the frontend Send BTC experience to surface the new backend safety-check and broadcast outcomes in clear English (invalid address, insufficient on-chain funds, broadcast failed with reason, broadcast succeeded with txid), reusing the existing flow that fetches the created transfer request after `sendBTC` so the UI reflects the persisted request status/txid/failureReason.",
      "reqIds": [
        "REQ-87"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-visible-reserve-section-in-the-existing-admin-page-that-displays-reserve-btc-balance-outstanding-credits-and-reserve-coverage-ratio-and-includes-a-simple-admin-only-control-to-adjust-the-tracked-reserve-balance-with-a-required-english-reason",
      "title": "Add an admin-visible Reserve section in the existing Admin page that displays reserve BTC balance, outstanding credits, and reserve coverage ratio, and includes a simple admin-only control to adjust the tracked reserve balance with a required English reason.",
      "reqIds": [
        "REQ-91"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-copy-in-the-signed-in-experience-to-clearly-state-that-credits-are-btc-denominated-represent-1-1-backing-by-btc-held-in-reserve-and-that-the-usd-market-value-fluctuates-with-the-bitcoin-market-price",
      "title": "Update user-facing copy in the signed-in experience to clearly state that credits are BTC-denominated, represent 1:1 backing by BTC held in reserve, and that the USD market value fluctuates with the Bitcoin market price.",
      "reqIds": [
        "REQ-92"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-dashboard-signed-in-experience-to-display-1-the-user-s-credit-balance-in-btc-and-2-an-approximate-usd-value-derived-from-the-live-btc-usd-price-with-clear-english-copy-stating-it-is-an-estimate-and-can-fluctuate",
      "title": "Update the Dashboard signed-in experience to display (1) the user’s credit balance in BTC and (2) an approximate USD value derived from the live BTC/USD price, with clear English copy stating it is an estimate and can fluctuate.",
      "reqIds": [
        "REQ-94"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-puzzle-rewards-feature-that-lets-signed-in-users-solve-simple-in-app-puzzles-to-earn-small-amounts-of-credits-and-record-earned-credits-in-the-ledger-transaction-history-as-an-adjustment-with-an-english-reason",
      "title": "Add a new \"Puzzle Rewards\" feature that lets signed-in users solve simple in-app puzzles to earn small amounts of credits, and record earned credits in the ledger/transaction history as an adjustment with an English reason.",
      "reqIds": [
        "REQ-95"
      ],
      "version": 1
    },
    {
      "id": "feature-add-clear-english-disclosures-in-the-puzzle-rewards-ui-explaining-that-solving-puzzles-does-not-mine-real-bitcoin-and-that-rewards-are-app-issued-credits-btc-denominated-that-can-be-used-for-bitcoin-mainnet-transfers-subject-to-reserve-and-network-fees",
      "title": "Add clear English disclosures in the Puzzle Rewards UI explaining that solving puzzles does NOT mine real Bitcoin and that rewards are app-issued credits (BTC-denominated) that can be used for Bitcoin mainnet transfers, subject to reserve and network fees.",
      "reqIds": [
        "REQ-96"
      ],
      "version": 1
    },
    {
      "id": "feature-display-the-usd-value-of-a-single-credit-btc-denominated-using-the-live-btc-usd-price-and-show-it-in-the-signed-in-ui-alongside-existing-balance-usd-estimates-e-g-1-credit-btc-x-xx",
      "title": "Display the USD value of a single credit (BTC-denominated) using the live BTC/USD price, and show it in the signed-in UI alongside existing balance USD estimates (e.g., “1 Credit (BTC) ≈ $X.XX”).",
      "reqIds": [
        "REQ-97"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-user-facing-send-transfer-flows-reflect-the-real-broadcast-outcome-posted-vs-not-posted-based-on-the-persisted-transfer-request-fields-status-blockchaintxid-failurereason-and-keep-all-user-facing-text-in-clear-english",
      "title": "Ensure user-facing send/transfer flows reflect the real broadcast outcome (posted vs. not posted) based on the persisted transfer request fields (status, blockchainTxId, failureReason), and keep all user-facing text in clear English.",
      "reqIds": [
        "REQ-100"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-reserve-management-ux-copy-to-reflect-that-reserve-btc-can-be-funded-via-third-party-providers-bitpay-moonpay-metamask-without-implementing-direct-provider-integrations-ensure-all-user-facing-text-is-clear-english",
      "title": "Update the admin Reserve Management UX copy to reflect that reserve BTC can be funded via third-party providers (BitPay, MoonPay, MetaMask) without implementing direct provider integrations; ensure all user-facing text is clear English.",
      "reqIds": [
        "REQ-105"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-send-btc-admin-send-btc-user-experience-clearly-reflects-the-real-on-chain-posting-outcome-for-the-created-request-and-makes-it-easy-to-view-the-request-details-when-a-transfer-fails-to-appear-on-mainnet",
      "title": "Ensure the Send BTC / Admin Send BTC user experience clearly reflects the real on-chain posting outcome for the created request, and makes it easy to view the request details when a transfer fails to appear on mainnet.",
      "reqIds": [
        "REQ-106"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement website credit purchase system where 1 credit equals 1 BTC",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Enable sending BTC to any Bitcoin mainnet wallet using purchased credits",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Integrate blockchain APIs to authenticate/verify transactions",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Implement a credit ledger where 1 credit equals 1 BTC, with backend-enforced accounting (no negative balances) and a full transaction history (credits added, credits spent, and adjustments).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Provide an admin-only capability (restricted by a backend allowlist of principals) to adjust user credits for support/testing, with all adjustments recorded in the ledger history.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Implement an app-managed (custodial) wallet created by the app for receiving BTC deposits and sending BTC out to user-specified mainnet addresses as part of the transfer flow.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Handle on-chain transaction fees in send/transfer processing such that fees are paid out of (deducted from) the amount being sent when using blockchain APIs.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update UI/UX copy and messaging to clearly communicate that 1 purchased credit equals 1 BTC sent on Bitcoin mainnet to any mainnet wallet, verified via blockchain API.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "When a user initiates a send, broadcast the BTC transaction directly to the receiver’s mainnet wallet (on-chain) and deduct blockchain network fees from the user’s credits (net received may be less than requested).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Update the backend SendBTCRequest model and sendBTC flow to support network-fee accounting: record an explicit network fee (in credits/BTC units) per transfer request, and deduct the total cost (requested send amount + network fee) from the user’s credit balance while keeping the intended receiver amount unchanged.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Expose backend APIs needed by the frontend to display and use network-fee information for transfers, including a query that returns the current estimated network fee for a proposed transfer (amount, destination) and returning fee fields as part of any transfer-request data the UI already relies on.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "If existing deployed state uses a global \"admin initial credits issued\" flag, add a safe state migration so the app can track initial-credit issuance per admin principal without breaking existing balances, transactions, or transfer requests.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "After Internet Identity sign-in, verify whether the principal is an admin and then automatically navigate admins directly to the Admin page (/admin)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Add the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` to the backend admin allowlist used by the AccessControl system so this principal is recognized as an admin by `AccessControl.isAdmin(...)`.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Add the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` to the backend admin allowlist used by the AccessControl system so this principal is recognized as an admin by `AccessControl.isAdmin(...)` and can access the Admin panel route `/admin`.",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Add the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` to the backend admin allowlist used by the AccessControl system so this principal is recognized as an admin by `AccessControl.isAdmin(...)` and can access the Admin panel route `/admin`.",
      "reqIds": [
        "REQ-47"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Ensure the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` is recognized as an admin by the backend access-control allowlist so that `isCallerAdmin()` returns `true` for that principal after sign-in.",
      "reqIds": [
        "REQ-48"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` to the backend admin allowlist used by the AccessControl system so this principal is recognized as an admin by `AccessControl.isAdmin(...)` / `isCallerAdmin()` after sign-in and can access the Admin panel route `/admin`.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Ensure the backend recognizes the Internet Identity principal `ih4li-2xvzb-eiqhx-p746g-mfu4p-qceq3-iq7li-gh4d2-3ajo4-qldaw-iqe` as an admin in the backend access-control allowlist so `isCallerAdmin()` returns `true` for that principal after sign-in.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Fix/ensure Send BTC transactions are actually broadcast and posted on the Bitcoin mainnet (on-chain), and reflect correct status in the app when a user sends credits to a wallet.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Update the backend `sendBTC(destination, amount)` flow so that creating a Bitcoin mainnet transfer also triggers an on-chain broadcast attempt (via the app’s configured blockchain API/outcall path), and records the resulting on-chain transaction ID (txid) when broadcast succeeds.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Ensure funds/ledger accounting stays correct when an on-chain broadcast fails: if the backend cannot broadcast a transaction for a new Send BTC request, the request must be marked `FAILED` and the user’s credits must be restored so the user is not charged for an unposted on-chain transfer.",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Enable real on-chain broadcast for the backend `sendBTC(destination, amount)` flow so that a Send BTC action attempts to post a Bitcoin mainnet transaction instead of always returning `BTC_API_DISABLED`. Use the existing http-outcalls capability (`http-outcalls/outcall`) to perform the broadcast via the app’s configured blockchain API/outcall path, and capture the resulting on-chain transaction ID (txid) when available.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Fix backend failure semantics so users are not charged for unposted on-chain transfers and the app can still show an auditable transfer record. Specifically: if broadcast fails, do not delete the transfer request; mark it as `FAILED`, keep `blockchainTxId = null`, restore the user balance for the full `totalCost`, and ensure transaction history does not incorrectly show a net debit for a failed broadcast.",
      "reqIds": [
        "REQ-61"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Align backend transfer status updates with the UI’s on-chain lifecycle: after a successful broadcast, persist the request with `blockchainTxId` set and a non-failed status that indicates “broadcast submitted / in progress” (do not mark as `FAILED`). The status must support the existing frontend status labels (`IN_PROGRESS`, `FAILED`, etc.) shown in the transfer details dialog.",
      "reqIds": [
        "REQ-62"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Add an in-app “cloud mining” capability (AI solving complex puzzles) that converts the resulting output into admin credits.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Update the backend `sendBTC(destination, amount)` flow so that creating a Send BTC request results in a real Bitcoin mainnet transaction broadcast attempt to the receiver address (instead of always returning `BTC_API_DISABLED`), and persist the resulting on-chain transaction ID (txid) on success.",
      "reqIds": [
        "REQ-64"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Fix backend failure/rollback semantics for Send BTC so users are not charged when an on-chain broadcast fails or is unavailable, while still keeping an auditable transfer record in the app.",
      "reqIds": [
        "REQ-65"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Align backend transfer status updates with the frontend’s on-chain lifecycle display: after a successful broadcast, persist the request with a status that represents “broadcast submitted / in progress” and include `blockchainTxId` when available; do not mark broadcast-success transfers as `FAILED`.",
      "reqIds": [
        "REQ-66"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Make each user profile act as an app-managed (custodial) anonymous Bitcoin wallet so users can send BTC to mainnet addresses with credits and have transactions broadcast via blockchain network APIs.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Extend the backend user profile model so each authenticated user has a persistent, app-managed anonymous Bitcoin wallet identity that is created on first use and can be fetched later.",
      "reqIds": [
        "REQ-68"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Add backend APIs to retrieve the caller’s wallet identity (e.g., deposit address / wallet address) and ensure it is created if missing.",
      "reqIds": [
        "REQ-69"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Add a user-facing capability to confirm/verify that a Send BTC transfer request has completed on Bitcoin mainnet (e.g., show on-chain confirmation/completion state for the transfer).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Update the backend `sendBTC(destination, amount)` flow so that creating a transfer request attempts an on-chain Bitcoin mainnet broadcast (instead of always returning `BTC_API_DISABLED`), and persists the resulting on-chain transaction id (txid) on the `SendBTCRequest.blockchainTxId` when broadcast succeeds.",
      "reqIds": [
        "REQ-73"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Fix backend failure/rollback semantics for Send BTC so users are not charged for an unposted on-chain transfer while preserving an auditable transfer record: when broadcast fails or is unavailable, do not delete the transfer request; mark it `FAILED`, restore the user’s credits for the full `totalCost`, and ensure transaction history reflects that the funds were restored.",
      "reqIds": [
        "REQ-74"
      ],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "Add a backend capability to confirm a transfer’s completion on Bitcoin mainnet and update the saved `SendBTCRequest.status` accordingly, so the app can show a reliable completion state (e.g., move from `IN_PROGRESS` to `COMPLETED` once confirmed).",
      "reqIds": [
        "REQ-75"
      ],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "Implement real Bitcoin mainnet broadcast attempts in the backend `sendBTC(destination, amount)` flow instead of always returning `BTC_API_DISABLED` from `broadcastTransactionToBlockchain(...)`.",
      "reqIds": [
        "REQ-77"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Fix backend failure/rollback semantics so users are not charged for an unposted on-chain transfer while still keeping an auditable transfer record.",
      "reqIds": [
        "REQ-78"
      ],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Change backend `sendBTC(...)` to return a usable request identifier even when the on-chain broadcast fails, so the frontend can show the user the created request and its failure reason/status instead of losing the request context due to trapping.",
      "reqIds": [
        "REQ-79"
      ],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Add backend persistence for a user-readable broadcast failure reason per transfer request (in English) so troubleshooting is possible from the app UI.",
      "reqIds": [
        "REQ-80"
      ],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Build a Python-based AI agent using LangChain/Eliza to handle Bitcoin transaction workflows.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-53",
      "summary": "Implement send_btc(recipient_address, amount_btc) in Python to sign and broadcast Bitcoin mainnet transactions using the BlockCypher API.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "Integrate secure wallet key management for generating a public address and signing transaction outputs (private key protection).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Develop a Telegram bot interface (e.g., /send <address> <amount>) to initiate transactions via the AI agent.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-56",
      "summary": "Add safety checks: validate Bitcoin address format and check wallet balance before sending funds.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-57",
      "summary": "Implement real Bitcoin mainnet transaction broadcast using the BlockCypher API (https://www.blockcypher.com/) by replacing the current backend stub that returns `BTC_API_DISABLED` in `broadcastTransactionToBlockchain(...)`, so that `sendBTC(destination, amount)` attempts an on-chain broadcast and persists the resulting on-chain transaction id (txid) on success.",
      "reqIds": [
        "REQ-84"
      ],
      "status": "pending"
    },
    {
      "id": "AR-58",
      "summary": "Add backend safety checks before attempting BlockCypher broadcast: (1) validate Bitcoin mainnet destination address format and (2) check that the app-controlled on-chain sending wallet has sufficient on-chain BTC balance for the requested send, so the system fails safely with a clear English failure reason instead of attempting an invalid/insufficient-funds broadcast.",
      "reqIds": [
        "REQ-85"
      ],
      "status": "pending"
    },
    {
      "id": "AR-59",
      "summary": "Replace the mocked per-user wallet address generation (`\"MOCKED_ADDRESS_\" # caller.toText()`) with a real wallet/address provisioning flow compatible with BlockCypher, and ensure the backend continues to expose a persistent caller wallet identity via the existing `createCallerBitcoinWallet()` and `getCallerBitcoinWallet()` APIs.",
      "reqIds": [
        "REQ-86"
      ],
      "status": "pending"
    },
    {
      "id": "AR-60",
      "summary": "Implement a 1:1 BTC reserve backing model where total issued credits are backed by mainnet BTC held in reserve, and define how reserve balances are tracked/audited against outstanding credits.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-61",
      "summary": "Add reserve management capabilities (at least admin-visible): display reserve BTC balance, outstanding credits, and reserve coverage ratio to support the 1:1 backing claim.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-62",
      "summary": "Implement a backend BTC reserve-tracking model so that issued credits are represented as being backed 1:1 by mainnet BTC held in reserve, and expose a backend query that returns reserve status including: reserve BTC balance, total outstanding issued credits, and a reserve coverage ratio.",
      "reqIds": [
        "REQ-88"
      ],
      "status": "pending"
    },
    {
      "id": "AR-63",
      "summary": "Update backend accounting so reserve status updates automatically during credit lifecycle events: (1) when a credit purchase is successfully verified and credits are issued, increase tracked reserve by the issued amount; (2) when an on-chain BTC transfer is successfully broadcast, decrease tracked reserve by the on-chain spend amount (receiver amount plus network fee); (3) when an on-chain broadcast fails and the transfer request is marked FAILED and credits are restored, do not decrement reserve.",
      "reqIds": [
        "REQ-89"
      ],
      "status": "pending"
    },
    {
      "id": "AR-64",
      "summary": "Add backend enforcement for the 1:1 reserve claim by preventing issuance of new credits if it would cause outstanding credits to exceed tracked reserve coverage, unless an admin explicitly overrides via an admin-only reserve management action.",
      "reqIds": [
        "REQ-90"
      ],
      "status": "pending"
    },
    {
      "id": "AR-65",
      "summary": "Add an in-app \"puzzle solving / cloud mining\" mechanism intended to generate BTC for instant mainnet transaction liquidity, and integrate it with the app wallet + reserve tracking so mined BTC increases reserves/available credits-to-send.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-66",
      "summary": "Add a backend API to fetch and cache the current Bitcoin market price (BTC/USD) so the frontend can show the user the approximate USD value of their BTC-denominated credits.",
      "reqIds": [
        "REQ-93"
      ],
      "status": "pending"
    },
    {
      "id": "AR-68",
      "summary": "Implement a backend BTC/USD price feed API that the frontend can query to compute per-credit USD value, with basic caching to avoid excessive external calls.",
      "reqIds": [
        "REQ-98"
      ],
      "status": "pending"
    },
    {
      "id": "AR-69",
      "summary": "Replace the current stubbed on-chain broadcast behavior so that creating a Send BTC request attempts to broadcast a real Bitcoin mainnet transaction via the existing HTTP outcalls capability, and persists the broadcast result (txid on success, English failure reason on failure) on the transfer request.",
      "reqIds": [
        "REQ-99"
      ],
      "status": "pending"
    },
    {
      "id": "AR-70",
      "summary": "Integrate reserve BTC acquisition via BitPay, MoonPay, and/or MetaMask as supported funding sources for the app’s tracked BTC reserve.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-71",
      "summary": "Add a “flash bitcoin” withdraw/send option that lets users transfer/withdraw BTC from the app reserve to an external Bitcoin mainnet wallet, with clear on-chain posting status.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-72",
      "summary": "Troubleshoot and fix failing Send BTC / withdrawal transactions that are not appearing on Bitcoin mainnet (broadcast/on-chain posting failure).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-73",
      "summary": "Fix backend on-chain broadcast so Send BTC / “flash bitcoin” withdrawals are actually posted to Bitcoin mainnet instead of always failing with `BTC_API_DISABLED`, and persist the resulting on-chain txid when broadcast succeeds.",
      "reqIds": [
        "REQ-101"
      ],
      "status": "pending"
    },
    {
      "id": "AR-74",
      "summary": "Ensure backend failure semantics are safe and auditable when an on-chain broadcast fails: the transfer request must remain saved, be marked `FAILED`, store an English `failureReason`, and the user’s deducted credits (full `totalCost`) must be restored so users are not charged for transfers that were not posted on-chain.",
      "reqIds": [
        "REQ-102"
      ],
      "status": "pending"
    },
    {
      "id": "AR-75",
      "summary": "Update reserve accounting so reserve BTC tracking is consistent with real on-chain outcomes: do not decrement reserve on failed broadcasts, and decrement reserve only when a broadcast succeeds (or when a transfer is later confirmed on-chain, if confirmation is the point at which reserve should be reduced).",
      "reqIds": [
        "REQ-103"
      ],
      "status": "pending"
    },
    {
      "id": "AR-76",
      "summary": "Add backend-side troubleshooting diagnostics (admin-only or development-only) to help identify why broadcasts are failing, without exposing secrets: capture and surface a structured error/failure reason from the broadcast attempt that can be shown in English in the UI.",
      "reqIds": [
        "REQ-104"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Bitcoin Credit Transfer",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}